debug: false

deploymentType: Helm
exposeInternalErrorDetails: false

traceCollectorThresholds:
  recentActivityUpdateThresholdSeconds: 5
  upsertEndpointThresholdSeconds: 5
  upsertSpansThresholdSeconds: 5
  upsertSpanFlowMetadataThresholdSeconds: 5

kafka:
  host: "{{ .Release.Name }}-kafka"
  imageTag: 3.5.1
  resources: {
    requests: {
      memoryInMb: "100",
      cpu: 200m
    },
    limits: {
      memoryInMb: "500",
      cpu: 500m
    }
  }
  
redis:
  host: "{{ .Release.Name }}-redis"
  imageTag: 7.0.5-alpine
  resources: {
    requests: {
      memory: 100Mi,
      cpu: 200m
    },
    limits: {
      memory: 800Mi,
      cpu: 500m
    }
  }

influx:
  host: "{{ .Release.Name }}-influxdb"
  imageTag: 2.7.1
  resources: {
    requests: {
      memory: 2Gi,
      cpu: 500m
    },
    limits: {
      memory: 4Gi,
      cpu: 2000m
    }
  }
  config: 
    queryConcurrency: 30
    queryQueueSize: 200
    

postgres:
  host: "{{ .Release.Name }}-postgres"
  imageTag: 15.1
  port: 5432
  username: postgres
  password: postgres
  maxConnections: 400
  maxMemory: 800MB # mapped to shared_buffers
  resources: {
    requests: {
      memory: 600Mi,
      cpu: 400m
    },
    limits: {
      memory: 2000Mi,
      cpu: 2000m
    }
  }

pgadmin:
  host: "{{ .Release.Name }}-pgadmin"
  email: admin@admin.com
  password: admin

embeddedJaeger:
  host: "{{ .Release.Name }}-embedded-jaeger"
  imageTag: "1.44.0"
  enabled: true
  exposed: true

kibana:
  host: "{{ .Release.Name }}-kibana"

redisCommander:
  host: "{{ .Release.Name }}-redis-commander"

elasticApmServer:
  host: "{{ .Release.Name }}-apm"

elasticsearch:
  host: "{{ .Release.Name }}-elasticsearch"

digmaDs:
  host: "{{ .Release.Name }}-ds"
  imageTag: 0.0.22
  replicas: 1
  resources: {
    requests: {
      memory: 100Mi,
      cpu: 100m
    },
    limits: {
      memory: 500Mi,
      cpu: 1000m
    }
  }

digmaCollectorApi:
  host: "{{ .Release.Name }}-collector-api"
  expose: false
  resources: {
    requests: {
      memory: 300Mi,
      cpu: 200m
    },
    limits: {
      memory: 500Mi,
      cpu: 400m
    }
  }

digmaCollectorWorker:
  host: "{{ .Release.Name }}-collector-worker"
  replicas: 4
  resources: {
    requests: {
      memory: 300Mi,
      cpu: 200m
    },
    limits: {
      memory: 800Mi,
      cpu: 700m
    }
  }

digmaAnalytics:
  host: "{{ .Release.Name }}-analytics"
  replicas: 1
  expose: false
  secured: false
  accesstoken: pcr5UDZqdvzky1cgj
  resources: {
    requests: {
      memory: 300Mi,
      cpu: 200m
    },
    limits: {
      memory: 800Mi,
      cpu: 800m
    }
  }

digmaScheduler:
  host: "{{ .Release.Name }}-scheduler"
  resources: {
    requests: {
      memory: 300Mi,
      cpu: 200m
    },
    limits: {
      memory: 1000Mi,
      cpu: 800m
    }
  }

digmaPipelineWorker:
  replicas: 4
  resources: {
    requests: {
      memory: 200Mi,
      cpu: 200m
    },
    limits: {
      memory: 500Mi,
      cpu: 500m
    }
  }

digmaMeasurementAnalysis:
  replicas: 4
  resources: {
    requests: {
      memory: 200Mi,
      cpu: 200m
    },
    limits: {
      memory: 900Mi,
      cpu: 900m
    }
  }

digmaSelfDiagnosis:
  otlpExportTraces: false
  otlpExportMetrics: true
  otlpExportLogs: false
  otlpExporterEndpoint: http://digma-otel-collector-df:4317/

digma:
  environmentName: stag01
  siteName: stag01
